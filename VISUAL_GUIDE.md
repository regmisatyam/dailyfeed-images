# Visual Guide: How It Works

## ğŸ¬ The Complete Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER REQUEST                             â”‚
â”‚                                                                  â”‚
â”‚   GET /news-image?id=393                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    STEP 1: CACHE CHECK                          â”‚
â”‚                                                                  â”‚
â”‚   Does news_393.jpg exist?                                      â”‚
â”‚   â”œâ”€ YES â†’ Return URL immediately (20-50ms) âœ…                  â”‚
â”‚   â””â”€ NO  â†’ Continue to generation â¬                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  STEP 2: FETCH ARTICLE                          â”‚
â”‚                                                                  â”‚
â”‚   ğŸ“¡ GET https://dailyfeed.teletechnepal.com/api/articles       â”‚
â”‚   â”œâ”€ Check in-memory cache (5 min TTL)                         â”‚
â”‚   â”œâ”€ If miss: Fetch from API                                   â”‚
â”‚   â””â”€ Return: { id: 393, title: "Trump and Oil..." }            â”‚
â”‚                                                                  â”‚
â”‚   â±ï¸  Time: 200-500ms                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              STEP 3: EXTRACT KEYWORDS (NLP)                     â”‚
â”‚                                                                  â”‚
â”‚   Input: "Trump and Oil Prices Shake Global Markets"           â”‚
â”‚                                                                  â”‚
â”‚   ğŸ” Compromise.js Analysis:                                    â”‚
â”‚   â”œâ”€ People: ["Trump"]                                          â”‚
â”‚   â”œâ”€ Objects: ["Oil", "Prices", "Markets"]                     â”‚
â”‚   â”œâ”€ Locations: []                                              â”‚
â”‚   â””â”€ General: ["Shake", "Global"]                              â”‚
â”‚                                                                  â”‚
â”‚   ğŸ¯ Search Strategy:                                           â”‚
â”‚   â”œâ”€ Main: "Trump" (portrait)                                  â”‚
â”‚   â”œâ”€ Secondary: "Oil" (landscape)                              â”‚
â”‚   â””â”€ Background: "Global Markets" (landscape)                  â”‚
â”‚                                                                  â”‚
â”‚   â±ï¸  Time: 10-50ms                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            STEP 4: SEARCH UNSPLASH (Real Photos)                â”‚
â”‚                                                                  â”‚
â”‚   Query 1: "Trump" (portrait)                                   â”‚
â”‚   ğŸ“¸ https://api.unsplash.com/search/photos?query=Trump         â”‚
â”‚   â””â”€ Result: Real Trump photograph                             â”‚
â”‚                                                                  â”‚
â”‚   Query 2: "Oil" (landscape)                                    â”‚
â”‚   ğŸ“¸ https://api.unsplash.com/search/photos?query=Oil           â”‚
â”‚   â””â”€ Result: Real oil barrels/pump jack photo                  â”‚
â”‚                                                                  â”‚
â”‚   Query 3: "Global Markets" (landscape)                         â”‚
â”‚   ğŸ“¸ https://api.unsplash.com/search/photos?query=Global+Marketsâ”‚
â”‚   â””â”€ Result: Real business/market photo                        â”‚
â”‚                                                                  â”‚
â”‚   â±ï¸  Time: 1-2 seconds                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              STEP 5: DOWNLOAD PHOTOS                            â”‚
â”‚                                                                  â”‚
â”‚   Download 3 high-resolution images from Unsplash               â”‚
â”‚   â”œâ”€ Main subject photo                                        â”‚
â”‚   â”œâ”€ Secondary subject photo                                   â”‚
â”‚   â””â”€ Background photo                                           â”‚
â”‚                                                                  â”‚
â”‚   â±ï¸  Time: 1-2 seconds                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          STEP 6: COMPOSE IMAGE (Sharp.js)                       â”‚
â”‚                                                                  â”‚
â”‚   Canvas: 1920Ã—1080 (16:9)                                      â”‚
â”‚                                                                  â”‚
â”‚   Layer 1: Background                                           â”‚
â”‚   â”œâ”€ Resize to 1920Ã—1080                                       â”‚
â”‚   â”œâ”€ Darken by 30% (brightness: 0.7)                           â”‚
â”‚   â””â”€ Cover entire canvas                                        â”‚
â”‚                                                                  â”‚
â”‚   Layer 2: Main Subject (Trump)                                â”‚
â”‚   â”œâ”€ Resize to 864Ã—1080 (45% width)                            â”‚
â”‚   â”œâ”€ Position: left=50, top=0                                  â”‚
â”‚   â””â”€ Blend mode: over                                           â”‚
â”‚                                                                  â”‚
â”‚   Layer 3: Secondary Subject (Oil)                             â”‚
â”‚   â”œâ”€ Resize to 864Ã—648 (45% width, 60% height)                 â”‚
â”‚   â”œâ”€ Position: right=50, top=216                               â”‚
â”‚   â””â”€ Blend mode: over                                           â”‚
â”‚                                                                  â”‚
â”‚   Layer 4: Title Overlay                                       â”‚
â”‚   â”œâ”€ Semi-transparent black bar (200px height)                 â”‚
â”‚   â”œâ”€ Position: bottom of canvas                                â”‚
â”‚   â”œâ”€ Text: White, 48px, bold                                   â”‚
â”‚   â””â”€ Content: "Trump and Oil Prices..."                        â”‚
â”‚                                                                  â”‚
â”‚   Output: JPEG (quality: 90%)                                  â”‚
â”‚                                                                  â”‚
â”‚   â±ï¸  Time: 500ms-1s                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              STEP 7: SAVE TO DISK                               â”‚
â”‚                                                                  â”‚
â”‚   File: public/generated/news_393.jpg                           â”‚
â”‚   Size: ~200-500KB                                              â”‚
â”‚   Permissions: Read-only for web serving                        â”‚
â”‚                                                                  â”‚
â”‚   â±ï¸  Time: 50-100ms                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    STEP 8: RETURN RESPONSE                      â”‚
â”‚                                                                  â”‚
â”‚   HTTP 200 OK                                                   â”‚
â”‚   Content-Type: application/json                                â”‚
â”‚                                                                  â”‚
â”‚   {                                                              â”‚
â”‚     "id": 393,                                                  â”‚
â”‚     "url": "http://localhost:3000/generated/news_393.jpg"      â”‚
â”‚   }                                                              â”‚
â”‚                                                                  â”‚
â”‚   â±ï¸  Total Time: 3-5 seconds                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ–¼ï¸ Image Composition Layouts

### Full Composition (3 Photos)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       1920 Ã— 1080                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•—                                              â”‚
â”‚  â•‘           â•‘         BACKGROUND IMAGE                     â”‚
â”‚  â•‘   MAIN    â•‘       (Darkened to 70%)                      â”‚
â”‚  â•‘  SUBJECT  â•‘                                              â”‚
â”‚  â•‘  (Trump)  â•‘              â•”â•â•â•â•â•â•â•â•â•â•â•â•—                   â”‚
â”‚  â•‘           â•‘              â•‘ SECONDARY â•‘                   â”‚
â”‚  â•‘  864Ã—1080 â•‘              â•‘  SUBJECT  â•‘                   â”‚
â”‚  â•‘           â•‘              â•‘   (Oil)   â•‘                   â”‚
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•              â•‘ 864Ã—648   â•‘                   â”‚
â”‚                             â•šâ•â•â•â•â•â•â•â•â•â•â•â•                   â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“ â”‚   â”‚
â”‚  â”‚ â–“                                                  â–“ â”‚   â”‚
â”‚  â”‚ â–“  Trump and Oil Prices Shake Global Markets     â–“ â”‚   â”‚
â”‚  â”‚ â–“                                                  â–“ â”‚   â”‚
â”‚  â”‚ â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“ â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                      200px height                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Two-Layer Composition (2 Photos)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       1920 Ã— 1080                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•—                                              â”‚
â”‚  â•‘           â•‘                                              â”‚
â”‚  â•‘   MAIN    â•‘         BACKGROUND IMAGE                     â”‚
â”‚  â•‘  SUBJECT  â•‘       (Darkened to 75%)                      â”‚
â”‚  â•‘           â•‘                                              â”‚
â”‚  â•‘  960Ã—1080 â•‘                                              â”‚
â”‚  â•‘           â•‘                                              â”‚
â”‚  â•‘           â•‘                                              â”‚
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•                                              â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“ â”‚   â”‚
â”‚  â”‚ â–“                                                  â–“ â”‚   â”‚
â”‚  â”‚ â–“  Article Title Here                             â–“ â”‚   â”‚
â”‚  â”‚ â–“                                                  â–“ â”‚   â”‚
â”‚  â”‚ â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“ â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Caching Visualization

### First Request (Cache Miss)

```
Request â†’ Cache Check â†’ âŒ Not Found
                        â†“
                   Full Pipeline
                   (3-5 seconds)
                        â†“
                   Save to Cache
                        â†“
                   Return URL
```

### Second Request (Cache Hit)

```
Request â†’ Cache Check â†’ âœ… Found!
                        â†“
                   Return URL
                   (20-50ms)
```

## ğŸ“Š Performance Comparison

```
First Request:  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 3-5 seconds
Cached Request: â–ˆ 20-50ms

Speed Improvement: 60-250x faster! ğŸš€
```

## ğŸ¯ Keyword Extraction Examples

### Example 1: Person + Object

**Input:** "Biden Announces Climate Change Initiative"

```
NLP Analysis:
â”œâ”€ People: ["Biden"]
â”œâ”€ Objects: ["Climate", "Change", "Initiative"]
â”œâ”€ Locations: []
â””â”€ General: ["Announces"]

Search Strategy:
â”œâ”€ Main: "Biden" â†’ Real Biden photo
â”œâ”€ Secondary: "Climate Change" â†’ Environmental photo
â””â”€ Background: "Initiative" â†’ Government/official setting
```

### Example 2: Location + Event

**Input:** "Earthquake Strikes California Coast"

```
NLP Analysis:
â”œâ”€ People: []
â”œâ”€ Objects: ["Earthquake", "Coast"]
â”œâ”€ Locations: ["California"]
â””â”€ General: ["Strikes"]

Search Strategy:
â”œâ”€ Main: "Earthquake" â†’ Damage/cracks photo
â”œâ”€ Secondary: "Coast" â†’ Coastal scenery
â””â”€ Background: "California" â†’ California landscape
```

### Example 3: Complex Multi-Entity

**Input:** "Trump and Putin Discuss Nuclear Arms in Geneva"

```
NLP Analysis:
â”œâ”€ People: ["Trump", "Putin"]
â”œâ”€ Objects: ["Nuclear", "Arms"]
â”œâ”€ Locations: ["Geneva"]
â””â”€ General: ["Discuss"]

Search Strategy:
â”œâ”€ Main: "Trump" â†’ Real Trump photo
â”œâ”€ Secondary: "Nuclear Arms" â†’ Military/weapons photo
â””â”€ Background: "Geneva" â†’ Geneva cityscape
```

## ğŸ” Security Flow

```
Client Request
     â†“
[Input Validation]
     â”œâ”€ Article ID: Must be integer
     â”œâ”€ No SQL injection risk
     â””â”€ No XSS risk
     â†“
[Server-Side Processing]
     â”œâ”€ API Key: From environment (hidden)
     â”œâ”€ No client exposure
     â””â”€ Secure HTTPS to Unsplash
     â†“
[File Storage]
     â”œâ”€ Read-only public access
     â”œâ”€ No executable files
     â””â”€ Safe JPEG output
     â†“
Response (URL only)
```

## ğŸ“ˆ Rate Limiting (Unsplash)

```
Free Tier: 50 requests/hour

Without Caching:
â”œâ”€ 3 searches per image = 16 images/hour max
â””â”€ âš ï¸  Very limited!

With Caching:
â”œâ”€ First request: 3 API calls
â”œâ”€ Subsequent: 0 API calls
â””â”€ âœ… Unlimited cached images!

Recommendation: Cache aggressively!
```

## ğŸ¨ Color & Style Guide

### Background Darkening
- **Purpose**: Make title text readable
- **Strategy**:
  - 3 layers: 70% brightness (darkest)
  - 2 layers: 75% brightness
  - 1 layer: 80% brightness (lightest)

### Title Overlay
- **Background**: Black with 70% opacity
- **Text**: White, 48px, bold
- **Font**: Arial (universal compatibility)
- **Padding**: 60px left, 40px top from overlay

### Image Quality
- **Format**: JPEG
- **Quality**: 90% (balance size/quality)
- **Size**: ~200-500KB per image
- **Resolution**: 1920Ã—1080 (Full HD)

## ğŸš¦ Status Indicators

### Server Logs

```
ğŸš€ Server start
ğŸ“¡ Fetching data
ğŸ” Keyword extraction
ğŸ“¸ Photo retrieval
ğŸ¨ Image composition
ğŸ’¾ File saved
âœ… Success
âŒ Error
âš ï¸  Warning
```

### HTTP Status Codes

```
200 âœ… Success
400 âŒ Bad Request (invalid input)
404 âŒ Not Found (article doesn't exist)
500 âŒ Server Error (processing failed)
```

## ğŸ”„ Complete Request Lifecycle

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Client  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚ GET /news-image?id=393
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Express    â”‚ â† Validate input
â”‚   Server     â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Router     â”‚ â† Check cache
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”œâ”€ Cache Hit? â†’ Return URL (fast path)
     â”‚
     â””â”€ Cache Miss â†“
        â”‚
        â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚   Article    â”‚ â† Fetch from API
   â”‚   Fetcher    â”‚
   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚   Keyword    â”‚ â† NLP extraction
   â”‚  Extractor   â”‚
   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚   Unsplash   â”‚ â† Search photos
   â”‚   Service    â”‚
   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚    Image     â”‚ â† Compose layers
   â”‚   Composer   â”‚
   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚     File     â”‚ â† Save to disk
   â”‚    Utils     â”‚
   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚   Response   â”‚ â† Return JSON
   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  Client  â”‚ â† Receives URL
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ Key Takeaways

1. **Real Photos Only** - No AI generation, only Unsplash
2. **Smart Caching** - 60-250x faster on cache hits
3. **NLP-Powered** - Intelligent keyword extraction
4. **News-Style** - Professional 16:9 compositions
5. **Production-Ready** - Error handling, logging, documentation

---

**This visual guide helps you understand the complete system at a glance!** ğŸ‘ï¸

